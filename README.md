# Loyalty-system Система лояльности 

## Описание проекта
Система построения лояльности Whizzband для клиентов торгово-сервисных предприятий(ТСП) малого и среднего бизнеса 

Whizzband создали систему лояльности для ТСП и предлагает использовать для привлечения клиентов Whizzcoint. 
Чтобы стать частью глобальной системы необходимо завести кошелек в системе, указать информацию о компании, настроить систему лояльности (указать за что могут начисляться и списываться баллы) и пополнить кошелек на определенную сумму coinов. 
Программа распределяет участников Whizzband по коалициям, согласно сфере работы и маржинальности бизнеса или по усмотрению самого участника. 

Система разработана с использование технологии цепочек блоков (blockchain) на платформе [Corda](https://www.corda.net) 

# Требования
* Git
* Android 5.0 (API21) - минимальная поддерживаемая версия;
* JDK 8u181;
* 4Гб RAM или больше для Серверного приложения;
* IntelliJ IDEA with Gradle для разрешения всех зависимостей и запуска узлов узлов сети 
* CMD
* H2 DataBase для проверки транзакций

# Инструкция по запуску
Для инициализации и запуска серверного приложения в тестовой среде необходимо:

1. Загрузить исходные файлы с помощью команды **Git**:
```
git clone https://github.com/vladimirevsin/loyalty-system.git
```

2. Открыть проект с помощью **IDE IntelliJ IDEA** и запустить терминал или открыть директорию, в которой хранится проект, в терминале **CMD**. Затем выполнить команду:
```
gradlew build
```
Выполение данной команды позволит собрать проект из исходных файлов.

3. Выполнить сборку узлов сети с помощью команды в терминале:
```
gradlew deployNodes
```

4. Запустить предварительно настроенные узлы сети. Для этого необходимо перейти в директорию 
```
..\loyalty-system\build\nodes
```

И запустить исполняемый файл 
```
runnodes.jar
``` 

Выполнится инициализация 4х узлов сети на локальной машине.
Не завершать работу запущенных узлов до окончания работ.

5. Запустить серверное приложение. Для этого можно использовать встроенные средства запуска проектов **IDE IntelliJ IDEA** или с помощью следующей команды в терминале **CMD**:
```

```

Для просмотра проводимых транзакций необходимо:
1. Запустить **H2**; 
2. В графе **JDBC URL** указать путь к базе. Его можно узнать в терминале запущенного узла. Пример адреса к базе:
```
jdbc:h2:tcp://<ip-address>:<port>/node
```
3. Для инициализации первичных данных в окне браузера необходимо ввести (localhost:8080/bank/install_begin) это действиие со стороны банка произведет инициализацию альянса, создаст параметры для инициализации узла ТСП, а также даст ТСП токены.

4. Далее необходимо используя команды из web-браузера (в контроллерах указаны пути запроса) или мобильного приложения управлять действиями 4 узлов

## Лицензия
Loyalty-system под лицензией [MIT License](https://github.com/vladimirevsin/loyalty-system/blob/master/LICENSE)
